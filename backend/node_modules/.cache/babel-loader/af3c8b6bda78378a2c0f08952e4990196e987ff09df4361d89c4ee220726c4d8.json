{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\kitchen-spell\\\\chef-house\\\\src\\\\components\\\\LoginScreen.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginScreen({\n  location = {}\n}) {\n  _s();\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [userInfo, setUserInfo] = useState(null);\n  const [error, setError] = useState(null);\n  const redirect = location.search ? location.search.split('=')[1] : '/';\n  useEffect(() => {\n    if (userInfo) {\n      navigate.push(redirect || '/');\n    }\n  }, [navigate, userInfo, redirect]);\n  const submitHandler = async e => {\n    e.preventDefault();\n    try {\n      const config = {\n        headers: {\n          'Content-type': 'application/json'\n        }\n      };\n      const {\n        data\n      } = await axios.post('/api/users/login/', {\n        username: email,\n        password: password\n      }, config);\n      setUserInfo(data);\n\n      // Redirect to another page upon successful login\n      navigate.push(redirect || '/');\n    } catch (error) {\n      // Update state with the error\n      const errorMessage = error.response && error.response.data.detail ? error.response.data.detail : error.message;\n      setError(errorMessage);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Email Address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Enter Email\",\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Enter Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"New Customer? \", /*#__PURE__*/_jsxDEV(Link, {\n        to: redirect ? `/register?redirect=${redirect}` : '/register',\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(LoginScreen, \"3sc6Bp0upELsJFwKOUNXjGeB0hk=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginScreen;\nexport default LoginScreen;\nvar _c;\n$RefreshReg$(_c, \"LoginScreen\");","map":{"version":3,"names":["useState","useEffect","useNavigate","Link","axios","jsxDEV","_jsxDEV","LoginScreen","location","_s","navigate","email","setEmail","password","setPassword","userInfo","setUserInfo","error","setError","redirect","search","split","push","submitHandler","e","preventDefault","config","headers","data","post","username","errorMessage","response","detail","message","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","required","to","_c","$RefreshReg$"],"sources":["C:/Users/USER/kitchen-spell/chef-house/src/components/LoginScreen.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction LoginScreen({ location = {}}) {\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  const redirect = location.search ? location.search.split('=')[1] : '/';\r\n\r\n  useEffect(() => {\r\n    if (userInfo) {\r\n      navigate.push(redirect || '/');\r\n    }\r\n  }, [navigate, userInfo, redirect]);\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const config = {\r\n        headers: {\r\n          'Content-type': 'application/json',\r\n        },\r\n      };\r\n\r\n      const { data } = await axios.post('/api/users/login/', {\r\n        username: email,\r\n        password: password,\r\n      }, config);\r\n\r\n      setUserInfo(data);\r\n\r\n      // Redirect to another page upon successful login\r\n      navigate.push(redirect || '/');\r\n    } catch (error) {\r\n      // Update state with the error\r\n      const errorMessage =\r\n        error.response && error.response.data.detail\r\n          ? error.response.data.detail\r\n          : error.message;\r\n\r\n      setError(errorMessage);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Sign In</h1>\r\n      {error && <p>{error}</p>}\r\n\r\n      <form onSubmit={submitHandler}>\r\n        <label>Email Address</label>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Enter Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <label>Password</label>\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Enter Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <button type=\"submit\">Sign In</button>\r\n      </form>\r\n\r\n      <p>New Customer? <Link to={redirect ? `/register?redirect=${redirect}` : '/register'}>Register</Link></p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}